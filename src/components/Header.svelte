<script>
  import { visible, items } from './Cart.svelte'
	import { stores } from '@sapper/app'
	const { page, session } = stores()

	export let segment
</script>

<style>
  header {
    position: fixed;
    z-index: 20;
    top: 0;
    left: 0;
    width: 100%;
    padding: calc(var(--gutter) / 6) calc(var(--gutter) / 2);
    /* pointer-events: none; */
    background: hsla(0, 0%, 100%, 0.95);
    backdrop-filter: blur(6px);
  }

  nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  nav > div {
    width: 25%;
  }

  nav > div:last-child {
    text-align: right;
  }

  figure {
    /* font-size: var(--huge);
    color: var(--navy);
    line-height: 1;
    font-family: var(--serif);
    font-weight: bold; */
    margin: 0;
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
  }

    a, button {
      /* pointer-events: auto; */
      display: inline-block;
      padding: calc(var(--rythm) / 2);
      font-size: var(--medium);
      color: var(--black);
    }
    
    button {
      border: none;
    }

      svg {
        width: var(--huge);
        height: var(--huge);
        vertical-align: middle;
        color: var(--navy);
      }

      figure svg {
        width: calc(var(--huge) * 2.66);
      }

      path {
        fill: currentColor;
      }

      summary {
        position: absolute;
        top: 0.3vw;
        right: 0.3vw;
        background: white;
        /* border-radius: 50%; */
        padding: 0 0.1em;
        font-weight: bold;
      }

  @media all and (max-width:666px) {
    nav > div {
      width: 50%;
    }

    /* figure {
      font-size: calc(var(--huge) / 2);
    } */

    a, button {
      font-size: calc(var(--medium) / 1.5);
    }

    svg {
      width: calc(var(--huge) / 2);
      height: calc(var(--huge) / 2);
    }

    figure svg {
      width: calc(var(--huge) * 1.66);
    }

    ul {
      display: none;
    }
  }
</style>

<header>
  <nav>
    <div>
      <a href="./"><figure>
        <svg width="222" height="65" viewBox="0 0 222 65" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M28.0062 60.0395C21.6877 60.0395 21.0046 59.5263 21.0046 57.5592V37.8882H44.2292V57.5592C44.2292 59.5263 43.5462 60.0395 37.2277 60.0395V64.1447H65.2338V60.0395C58.9154 60.0395 58.2323 59.5263 58.2323 57.5592V14.2829C58.2323 12.3158 58.9154 11.8026 65.2338 11.8026V7.69737H37.2277V11.8026C43.5462 11.8026 44.2292 12.3158 44.2292 14.2829V32.9276H21.0046V14.2829C21.0046 12.3158 21.6877 11.8026 28.0062 11.8026V7.69737H0V11.8026C6.31846 11.8026 7.00154 12.3158 7.00154 14.2829V57.5592C7.00154 59.5263 6.31846 60.0395 0 60.0395V64.1447H28.0062V60.0395Z"/>
        <path d="M109.122 53.9671L105.45 51.2303C102.291 55.6776 99.3877 57.6447 94.6915 57.6447C87.6046 57.6447 83.0792 52.5132 82.5669 43.875H109.292V41.8224C109.292 31.1316 103.315 22.2368 91.02 22.2368C78.81 22.2368 69.5031 32.3289 69.5031 44.4737C69.5031 57.3026 79.5785 65 90.6785 65C99.1315 65 105.706 60.8092 109.122 53.9671ZM90.6785 27.5395C95.8869 27.5395 96.9969 33.4408 96.9969 39.1711H82.5669C83.1646 32.0724 85.8969 27.5395 90.6785 27.5395Z"/>
        <path d="M148.228 65C152.668 65 156.51 62.6908 159.498 59.1842L157.022 56.4474C155.485 58.1579 154.205 58.5855 153.18 58.5855C152.07 58.5855 151.558 57.9013 151.558 56.2763V34.3816C151.558 26.7697 146.093 22.2368 136.786 22.2368C126.198 22.2368 116.294 27.1974 116.294 33.6974C116.294 37.4605 119.026 39.4276 122.015 39.4276C125.686 39.4276 127.821 36.9474 127.821 34.0395C127.821 32.9276 127.308 31.7303 127.308 31.0461C127.308 28.6513 130.041 27.4539 132.688 27.4539C136.786 27.4539 138.579 29.7632 138.579 34.3816V38.4868C123.466 43.3618 115.013 47.3816 115.013 55.6776C115.013 60.8947 119.282 65 125.43 65C130.126 65 134.481 63.2039 139.092 59.0132C141.141 62.8618 143.873 65 148.228 65ZM138.579 42.7632V55.8487C136.701 57.3026 134.993 57.9013 133.371 57.9013C130.468 57.9013 127.992 56.1053 127.992 52.2566C127.992 46.7829 133.285 44.4737 138.579 42.7632Z"/>
        <path d="M164.792 11.9737V58.5C164.792 60.125 164.28 60.3816 160.438 60.3816V64.1447H182.296V60.3816C178.454 60.3816 177.942 60.125 177.942 58.5V0H175.38L160.011 4.53289V7.09868L162.828 8.63816C164.28 9.4079 164.792 10.1776 164.792 11.9737Z"/>
        <path d="M205.521 27.0263C210.132 27.0263 213.632 29.6776 214.998 35.3224H218.755V25.2303C214.657 23.0921 210.558 22.2368 205.948 22.2368C195.702 22.2368 188.444 28.4803 188.444 35.9211C188.444 52.1711 210.815 45.6711 210.815 54.9934C210.815 58.2434 207.399 60.2105 203.728 60.2105C198.348 60.2105 193.908 58.0724 191.176 50.2895H187.078L188.102 61.2368C191.945 63.4605 196.726 65 203.215 65C213.291 65 222 59.2697 222 50.5461C222 34.5526 199.8 40.3684 199.8 32.0724C199.8 28.9079 202.276 27.0263 205.521 27.0263Z"/>
        </svg>
      </figure></a>
    </div>
    <ul>
      {#each $session.content.headerNavigation.fields.links as link}
      <li>
        <a rel=prefetch href="{link.fields.url}">{link.fields.label}</a>
      </li>
      {/each}
    </ul>
    <div>
      <a href="mailto:vic@healsshop.com" target="_blank">
        <svg width="68" height="60" viewBox="0 0 68 60" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M23.6915 0.00157014C23.4735 0.0292378 23.2648 0.105572 23.0811 0.224779L0.655615 14.5101C0.452945 14.6408 0.286731 14.8197 0.172195 15.0303C0.0576601 15.2408 -0.00153535 15.4764 3.02674e-05 15.7154V44.2861C6.8613e-05 44.665 0.152512 45.0283 0.423833 45.2962C0.695154 45.5641 1.06313 45.7146 1.44684 45.7147H34.8591C35.9223 53.7669 42.9221 60 51.3617 60C55.0006 60 58.387 58.838 61.1277 56.8751C61.2821 56.7652 61.413 56.6263 61.5131 56.4664C61.6131 56.3065 61.6803 56.1288 61.7107 55.9432C61.7412 55.7577 61.7343 55.5681 61.6906 55.3852C61.6468 55.2023 61.5669 55.0297 61.4556 54.8773C61.3443 54.7248 61.2036 54.5955 61.0417 54.4968C60.8797 54.398 60.6997 54.3317 60.5118 54.3017C60.3239 54.2716 60.1318 54.2784 59.9466 54.3217C59.7613 54.3649 59.5866 54.4438 59.4322 54.5537C57.1668 56.1762 54.3802 57.1429 51.3617 57.1429C43.7536 57.1429 37.617 51.0839 37.617 43.5719C37.617 36.0598 43.7536 30.0008 51.3617 30.0008C58.9698 30.0008 65.1064 36.0598 65.1064 43.5719C65.1064 44.8583 64.7263 45.8184 64.1569 46.4512C63.5875 47.0842 62.8159 47.4557 61.6476 47.4557C59.7231 47.4557 57.8723 45.8259 57.8723 44.0406V37.8577C57.8903 37.4789 57.7552 37.1084 57.4965 36.828C57.2379 36.5475 56.8771 36.38 56.4934 36.3622C56.1096 36.3445 55.7345 36.4779 55.4504 36.7333C55.1664 36.9886 54.9967 37.3449 54.9787 37.7238C53.9443 36.9155 52.6898 36.4292 51.2939 36.4292C47.6306 36.4292 44.8511 39.7488 44.8511 43.5719C44.8511 47.3949 47.6306 50.7145 51.2939 50.7145C53.4278 50.7145 55.2435 49.576 56.4029 47.8798C57.6572 49.3768 59.596 50.3128 61.6476 50.3128C63.5199 50.3128 65.2065 49.5941 66.3271 48.3485C67.4478 47.103 68 45.4168 68 43.5719C68 34.5157 60.5336 27.1437 51.3617 27.1437C50.1197 27.1437 48.9099 27.2892 47.7447 27.5455V15.7154C47.7463 15.4764 47.6871 15.2408 47.5725 15.0303C47.458 14.8197 47.2918 14.6408 47.0891 14.5101L24.6636 0.224779C24.4144 0.0677644 24.1225 -0.0101316 23.8271 0.00157014C23.782 -0.00052338 23.7367 -0.00052338 23.6915 0.00157014ZM23.8724 3.14881L43.8112 15.8494L23.8724 28.3044L3.93354 15.8494L23.8724 3.14881ZM2.89365 18.5725L23.1037 31.2061C23.3341 31.3487 23.6005 31.4243 23.8724 31.4243C24.1442 31.4243 24.4106 31.3487 24.641 31.2061L44.8511 18.5725V28.4606C39.121 30.8786 35.034 36.3964 34.746 42.8576H2.89365V18.5725ZM51.2939 39.2863C53.1441 39.2863 54.8431 41.0832 54.8431 43.5719C54.8431 46.0604 53.1441 47.8575 51.2939 47.8575C49.4437 47.8575 47.7447 46.0604 47.7447 43.5719C47.7447 41.0832 49.4437 39.2863 51.2939 39.2863Z"/>
        </svg>
      </a>
      <button on:click={() => visible.set(true)}>
        <svg width="63" height="53" viewBox="0 0 63 53" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1.3527 0.00155779C1.16655 0.0102462 0.98394 0.0555185 0.815291 0.13479C0.646642 0.214061 0.49526 0.325777 0.369791 0.46356C0.244322 0.601342 0.147224 0.762492 0.0840418 0.937804C0.0208595 1.11312 -0.00716929 1.29916 0.0015563 1.4853C0.0102819 1.67145 0.0555907 1.85405 0.134896 2.02269C0.2142 2.19132 0.325948 2.34268 0.463755 2.46812C0.601563 2.59356 0.762731 2.69063 0.938056 2.75378C1.11338 2.81692 1.29943 2.84491 1.48557 2.83615H8.88209L17.8288 37.2056C17.9074 37.5099 18.0849 37.7795 18.3335 37.9719C18.582 38.1644 18.8875 38.2687 19.2018 38.2686H53.9255C54.1134 38.2712 54.2998 38.2365 54.4741 38.1665C54.6484 38.0965 54.807 37.9925 54.9408 37.8606C55.0745 37.7287 55.1807 37.5716 55.2532 37.3983C55.3257 37.2251 55.363 37.0391 55.363 36.8513C55.363 36.6634 55.3257 36.4775 55.2532 36.3042C55.1807 36.1309 55.0745 35.9738 54.9408 35.8419C54.807 35.7101 54.6484 35.6061 54.4741 35.5361C54.2998 35.466 54.1134 35.4313 53.9255 35.434H20.309L19.2018 31.1821H55.3428C55.6572 31.1822 55.9626 31.0779 56.2112 30.8855C56.4597 30.693 56.6372 30.4235 56.7159 30.1191L62.385 8.15102C62.4391 7.94152 62.4445 7.72243 62.4008 7.51054C62.3571 7.29864 62.2655 7.09956 62.1329 6.92855C62.0004 6.75754 61.8305 6.61914 61.6362 6.52395C61.4419 6.42876 61.2284 6.37931 61.012 6.37939H12.7354L11.3624 1.06453C11.2838 0.760193 11.1062 0.490615 10.8577 0.298194C10.6091 0.105773 10.3037 0.00142369 9.98935 0.00155779H1.48557C1.44131 -0.000519263 1.39697 -0.000519263 1.3527 0.00155779ZM13.4883 9.21399H59.174L54.2356 28.3475H18.471L13.4883 9.21399ZM24.871 41.1032C21.7568 41.1032 19.2018 43.6581 19.2018 46.7724C19.2018 49.8866 21.7568 52.4415 24.871 52.4415C27.9852 52.4415 30.5402 49.8866 30.5402 46.7724C30.5402 43.6581 27.9852 41.1032 24.871 41.1032ZM48.965 41.1032C45.8508 41.1032 43.2958 43.6581 43.2958 46.7724C43.2958 49.8866 45.8508 52.4415 48.965 52.4415C52.0792 52.4415 54.6342 49.8866 54.6342 46.7724C54.6342 43.6581 52.0792 41.1032 48.965 41.1032ZM24.871 43.9378C26.4533 43.9378 27.7056 45.1901 27.7056 46.7724C27.7056 48.3546 26.4533 49.6069 24.871 49.6069C23.2887 49.6069 22.0364 48.3546 22.0364 46.7724C22.0364 45.1901 23.2887 43.9378 24.871 43.9378ZM48.965 43.9378C50.5473 43.9378 51.7996 45.1901 51.7996 46.7724C51.7996 48.3546 50.5473 49.6069 48.965 49.6069C47.3827 49.6069 46.1304 48.3546 46.1304 46.7724C46.1304 45.1901 47.3827 43.9378 48.965 43.9378Z"/>
        </svg>
        {#if $items.length}<summary>{$items.length}</summary>{/if}
      </button>
    </div>
  </nav>
</header>